<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Denah Fasilitas Museum - Ambar Polah</title>

  <!-- Style -->
  <style>
    :root{
      --bg-light: #f9f9f9;
      --card-light: #fffdf8;
      --text-light: #333;
      --accent-light: #5b3e1a;
      --muted-light: #6b6b6b;

      --bg-dark: #0f1113;
      --card-dark: #151617;
      --text-dark: #e9e9e9;
      --accent-dark: #d9a86c;
      --muted-dark: #9a9a9a;

      --radius: 12px;
      --transition: 0.28s;
    }

    /* Default (light) */
    html,body{
      margin:0; padding:0; height:100%;
      font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg-light);
      color: var(--text-light);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Page wrapper toggles with .dark on body */
    body.dark {
      background: var(--bg-dark);
      color: var(--text-dark);
    }

    header{
      background: var(--accent-light);
      color: #fff;
      padding:40px 20px;
      text-align:center;
      position:relative;
    }
    body.dark header { background: var(--accent-dark); color:#111; }

    header h1{ margin:0; font-size:1.8rem; letter-spacing:0.2px; }
    header p{ margin:8px 0 0; opacity:0.95; max-width:820px; margin-left:auto; margin-right:auto; font-size:0.95rem; }

    /* top controls */
    .top-controls{
      position:absolute; top:18px; right:18px; display:flex; gap:8px; align-items:center;
    }
    .btn{
      background:#fff; color:#111; border:0; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:600;
      box-shadow:0 2px 6px rgba(0,0,0,0.12);
    }
    .btn:hover{ transform:translateY(-2px); }
    body.dark .btn{ background:#222; color:var(--text-dark); box-shadow:none; border:1px solid #333; }

    /* container */
    .container{ width:92%; max-width:1150px; margin:30px auto; }

    .section-title{
      font-size:24px; font-weight:700; margin-bottom:16px;
      color:var(--accent-light);
      border-left:5px solid var(--accent-light); padding-left:12px;
    }
    body.dark .section-title{ color:var(--accent-dark); border-left-color:var(--accent-dark); }

    /* grid */
    .facility-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap:20px;
    }

    footer {
      text-align: center;
      padding: 15px;
      background-color: #f2f2f2;
      color: #777;
      font-size: 14px;
    }
    /* card */
    .facility-card{
      background:var(--card-light);
      border-radius:var(--radius);
      padding:14px;
      border:1px solid #e6d5bd;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
      overflow:hidden;
      cursor:pointer;
      transition: transform var(--transition), box-shadow var(--transition), opacity 0.6s ease;
      opacity:0; transform: translateY(18px);
      display:flex; flex-direction:column;
      will-change: transform, opacity;
    }
    body.dark .facility-card{ background:var(--card-dark); border-color:#292929; box-shadow:none; }

    /* staggered fade-in */
    .facility-card.visible{ opacity:1; transform: translateY(0); }

    .facility-card img{
      width:100%; height:160px; object-fit:cover; border-radius:10px; margin-bottom:12px; border:1px solid #e8d8c1;
    }
    body.dark .facility-card img{ border-color:#2b2b2b; }

    .facility-card h3{ margin:0; color:var(--accent-light); font-size:1.05rem; }
    body.dark .facility-card h3{ color:var(--accent-dark); }

    .facility-card p{ margin:8px 0 0; color:var(--muted-light); font-size:0.92rem; line-height:1.45; }
    body.dark .facility-card p{ color:var(--muted-dark); }

    /* hover overlay subtle */
    .facility-card .overlay{
      position:relative;
      transition: opacity var(--transition);
    }
    .facility-card:hover{ transform: translateY(-8px) scale(1.01); box-shadow: 0 20px 50px rgba(0,0,0,0.45); }

    /* popup (modal) */
    .modal {
      position: fixed; inset:0; display:flex; align-items:center; justify-content:center;
      background: rgba(0,0,0,0.6); backdrop-filter: blur(3px);
      z-index:1200; padding:20px; opacity:0; pointer-events:none; transition:opacity 0.18s ease;
    }
    .modal.open{ opacity:1; pointer-events:auto; }

    .modal-box{
      width:100%; max-width:760px; background:var(--card-light); border-radius:14px; padding:18px;
      box-shadow:0 30px 80px rgba(0,0,0,0.6); border: 1px solid #e6d5bd;
      transform: translateY(10px); transition: transform 0.22s ease;
    }
    body.dark .modal-box{ background:var(--card-dark); border-color:#333; }

    .modal.open .modal-box{ transform: translateY(0); }

    .modal-grid{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; align-items:start; }
    .modal-img{ width:100%; height:280px; object-fit:cover; border-radius:10px; border:1px solid #ddd; }
    body.dark .modal-img{ border-color:#333; }

    .modal h2{ margin:0 0 8px; color:var(--accent-light); }
    body.dark .modal h2{ color:var(--accent-dark); }
    .modal p{ margin:6px 0 0; color:var(--muted-light); line-height:1.5; }
    body.dark .modal p{ color:var(--muted-dark); }

    .modal-actions{ margin-top:12px; display:flex; gap:8px; justify-content:flex-end; }
    .close-btn{ background:var(--accent-light); color:#fff; border:0; padding:8px 14px; border-radius:8px; cursor:pointer; font-weight:700; }
    body.dark .close-btn{ background:var(--accent-dark); color:#111; }

    .detail-btn{ background:transparent; color:var(--muted-light); border:1px solid #ccc; padding:8px 12px; border-radius:8px; cursor:pointer; }
    body.dark .detail-btn{ color:var(--muted-dark); border-color:#333; }

    /* responsive modal layout */
    @media (max-width:720px){
      .modal-grid{ grid-template-columns: 1fr; }
      .modal-img{ height:200px; }
    }

    /* back link */
    .btn-back{ display:block; width:fit-content; margin:42px auto; background:var(--accent-light); color:#fff; padding:12px 20px; border-radius:8px; text-decoration:none; font-weight:700; }
    body.dark .btn-back{ background:var(--accent-dark); color:#111; }

    /* small helper */
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }

  </style>
</head>
<body>

  <header role="banner" aria-label="Header">
    <h1 id="page-title">Denah Fasilitas Museum</h1>
    <p id="page-sub">Daftar lengkap fasilitas dan ruangan Museum Kayu & Kriya Ambar Polah.</p>

    <div class="top-controls" role="group" aria-label="Tombol kontrol">
      <button id="darkToggle" class="btn" aria-pressed="false" title="Toggle Dark/Light">Dark</button>
      <button id="langToggle" class="btn" aria-pressed="false" title="Toggle Bahasa">EN</button>
    </div>
  </header>

  <main class="container" role="main">
    <h2 class="section-title" id="section-title">Fasilitas & Ruangan Museum</h2>

    <div class="facility-grid" id="grid">

      <!-- Cards: each card has data-* attributes for ID/EN title & detail, and image -->
      <!-- Example card (others follow same pattern) -->

      <article class="facility-card" tabindex="0"
        data-title-id="Joglo Utama"
        data-detail-id="Bangunan utama museum yang menjadi pusat penerimaan tamu dan area pameran awal."
        data-title-en="Main Joglo Hall"
        data-detail-en="Main building acting as reception and introductory exhibition space."
        data-img="assets/img/portfolio/joglo.jpg"
        role="button"
        aria-label="Joglo Utama — klik untuk detail">
        <div class="overlay">
          <img src="assets/img/portfolio/joglo.jpg" alt="Joglo Utama - foto">
          <h3>Joglo Utama</h3>
          <p>Bangunan utama museum yang menjadi pusat penerimaan tamu dan area pameran awal.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Ruang Ambar"
        data-detail-id="Ruang multifungsi untuk kegiatan edukasi, workshop besar, atau acara publik."
        data-title-en="Ambar Room"
        data-detail-en="Multifunction room for education activities, large workshops, and public events."
        data-img="assets/img/portfolio/ambarsaja.jpg"
        role="button"
        aria-label="Ruang Ambar — klik untuk detail">
        <div class="overlay">
          <img src="assets/img/portfolio/ambarsaja.jpg" alt="Ruang Ambar - foto">
          <h3>Ruang Ambar</h3>
          <p>Ruang multifungsi untuk kegiatan edukasi, workshop besar, atau acara publik.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Ruang Bismo"
        data-detail-id="Ruang pertemuan menengah yang sering digunakan untuk program komunitas."
        data-title-en="Bismo Room"
        data-detail-en="A medium meeting room often used for community programs."
        data-img="assets/img/portfolio/gambar_ruang_bismo.jpg"
        role="button"
        aria-label="Ruang Bismo — klik untuk detail">
        <div class="overlay">
          <img src="assets/img/portfolio/gambar_ruang_bismo.jpg" alt="Ruang Bismo - foto">
          <h3>Ruang Bismo</h3>
          <p>Ruang pertemuan menengah yang sering digunakan untuk program komunitas.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Ruang Shinta"
        data-detail-id="Ruang diskusi kecil untuk kelas, kegiatan kreatif, dan pembelajaran privat."
        data-title-en="Shinta Room"
        data-detail-en="A small discussion room for classes, creative activities, and private learning."
        data-img="assets/img/portfolio/gambar_ruang_shinta.jpg"
        role="button"
        aria-label="Ruang Shinta — klik untuk detail">
        <div class="overlay">
          <img src="assets/img/portfolio/gambar_ruang_shinta.jpg" alt="Ruang Shinta - foto">
          <h3>Ruang Shinta</h3>
          <p>Ruang diskusi kecil untuk kelas, kegiatan kreatif, dan pembelajaran privat.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Ruang Raya"
        data-detail-id="Ruang multifungsi yang bisa digunakan untuk mini pameran atau kelas kriya."
        data-title-en="Raya Room"
        data-detail-en="Multifunctional room for mini-exhibitions or craft classes."
        data-img="assets/img/portfolio/gambar_ruang_raya.jpg"
        role="button"
        aria-label="Ruang Raya — klik untuk detail">
        <div class="overlay">
          <img src="assets/img/portfolio/gambar_ruang_raya.jpg" alt="Ruang Raya - foto">
          <h3>Ruang Raya</h3>
          <p>Ruang multifungsi yang bisa digunakan untuk mini pameran atau kelas kriya.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Ruang Workshop"
        data-detail-id="Tempat praktik langsung pembuatan kriya dan ruang pelatihan intensif."
        data-title-en="Workshop Room"
        data-detail-en="Hands-on craft workshop and intensive training space."
        data-img="gambar_workshop.jpg"
        role="button"
        aria-label="Ruang Workshop — klik untuk detail">
        <div class="overlay">
          <img src="gambar_workshop.jpg" alt="Ruang Workshop - foto">
          <h3>Ruang Workshop</h3>
          <p>Tempat praktik langsung pembuatan kriya dan ruang pelatihan intensif.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Parkiran"
        data-detail-id="Area parkir yang luas untuk kendaraan pengunjung, termasuk bus wisata."
        data-title-en="Parking Area"
        data-detail-en="Spacious parking area for visitors, including tour buses."
        data-img="assets/img/portfolio/gambar_parkiran.jpg"
        role="button"
        aria-label="Parkiran — klik untuk detail">
        <div class="overlay">
          <img src="assets/img/portfolio/gambar_parkiran.jpg" alt="Parkiran - foto">
          <h3>Parkiran</h3>
          <p>Area parkir yang luas untuk kendaraan pengunjung, termasuk bus wisata.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Kamar Mandi"
        data-detail-id="Fasilitas sanitasi bersih dan mudah dijangkau dari berbagai zona."
        data-title-en="Restroom"
        data-detail-en="Clean restroom facilities easily accessible from various zones."
        data-img="gambar_kamar_mandi.jpg"
        role="button"
        aria-label="Kamar Mandi — klik untuk detail">
        <div class="overlay">
          <img src="gambar_kamar_mandi.jpg" alt="Kamar Mandi - foto">
          <h3>Kamar Mandi</h3>
          <p>Fasilitas sanitasi bersih dan mudah dijangkau dari berbagai zona.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Mushola"
        data-detail_id="Tempat ibadah yang nyaman dan tenang untuk pengunjung."
        data-detail-id="Tempat ibadah yang nyaman dan tenang untuk pengunjung."
        data-title-en="Prayer Room"
        data-detail-en="A comfortable and quiet prayer room for visitors."
        data-img="gambar_mushola.jpg"
        role="button"
        aria-label="Mushola — klik untuk detail">
        <div class="overlay">
          <img src="gambar_mushola.jpg" alt="Mushola - foto">
          <h3>Mushola</h3>
          <p>Tempat ibadah yang nyaman dan tenang untuk pengunjung.</p>
        </div>
      </article>

      <article class="facility-card" tabindex="0"
        data-title-id="Cafe Shop"
        data-detail-id="Tempat bersantai sambil menikmati minuman dan makanan ringan."
        data-title-en="Cafe Shop"
        data-detail-en="A cozy spot to enjoy drinks and light bites."
        data-img="assets/img/portfolio/gambar_cafe_shop.jpg"
        role="button"
        aria-label="Cafe Shop — klik untuk detail">
        <div class="overlay">
          <img src="assets/img/portfolio/gambar_cafe_shop.jpg" alt="Cafe Shop - foto">
          <h3>Cafe Shop</h3>
          <p>Tempat bersantai sambil menikmati minuman dan makanan ringan.</p>
        </div>
      </article>


        <article class="facility-card" tabindex="0"
        data-title-id="Toko kriya"
        data-detail-id="Tempat bersantai sambil menikmati minuman dan makanan ringan."
        data-title-en="Toko kriya"
        data-detail-en="A cozy spot to enjoy drinks and light bites."
        data-img="assets/img/portfolio/gambar_cafe_shop.jpg"
        role="button"
        aria-label="Toko kriya — klik untuk detail">
        <div class="overlay">
          <img src="assets/img/portfolio/" alt="Toko kriya - foto">
          <h3>Toko kriya</h3>
          <p>Museum menyediakan toko kriya yang menjual berbagai kerajinan tangan dan souvenir khas Ambar Polah.</p>
        </div>
      </article>

    </div> <!-- end grid -->

    <a class="btn-back" href="index.html">← Kembali ke Beranda</a>
<footer>
  © Museum Kayu & Kriya Ambar Polah 2025. All rights reserved.
</footer>
  </main>

  <!-- Modal (accessible) -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modalTitle">
    <div class="modal-box" role="document">
      <div class="modal-content">
        <div style="display:flex; justify-content:flex-end;">
          <button class="close-btn" id="modalClose" aria-label="Close modal">✕</button>
        </div>
        <div class="modal-grid">
          <div>
            <img id="modalImg" class="modal-img" src="" alt="">
          </div>
          <div>
            <h2 id="modalTitle">Title</h2>
            <p id="modalText">Detail text</p>
            <div class="modal-actions">
              <button id="modalMore" class="detail-btn">More info</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // ---------- Elements ----------
    const body = document.body;
    const darkToggle = document.getElementById('darkToggle');
    const langToggle = document.getElementById('langToggle');
    const grid = document.getElementById('grid');
    const cards = Array.from(document.querySelectorAll('.facility-card'));

    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modalImg');
    const modalTitle = document.getElementById('modalTitle');
    const modalText = document.getElementById('modalText');
    const modalClose = document.getElementById('modalClose');
    const modalMore = document.getElementById('modalMore');

    // Language mode: 'id' or 'en'
    let lang = 'id';

    // Dark mode initial state: respect user's preference
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if(prefersDark) { body.classList.add('dark'); darkToggle.textContent = 'Light'; darkToggle.setAttribute('aria-pressed','true'); }
    else { darkToggle.textContent = 'Dark'; darkToggle.setAttribute('aria-pressed','false'); }

    // ---------- Fade-in animation (stagger) ----------
    function revealCards(){
      cards.forEach((c, idx) => {
        setTimeout(() => c.classList.add('visible'), idx * 100);
      });
    }
    // call on load
    window.addEventListener('load', revealCards);

    // ---------- Dark toggle ----------
    darkToggle.addEventListener('click', () => {
      const isDark = body.classList.toggle('dark');
      darkToggle.textContent = isDark ? 'Light' : 'Dark';
      darkToggle.setAttribute('aria-pressed', isDark ? 'true' : 'false');
    });

    // ---------- Translate toggle ----------
    langToggle.addEventListener('click', () => {
      lang = (lang === 'id') ? 'en' : 'id';
      langToggle.textContent = (lang === 'id') ? 'EN' : 'ID';
      langToggle.setAttribute('aria-pressed', lang === 'en' ? 'true' : 'false');
      applyTranslations();
    });

    // Apply translations for static text and each card (title/desc)
    function applyTranslations(){
      const pageTitle = document.getElementById('page-title');
      const pageSub = document.getElementById('page-sub');
      const section = document.getElementById('section-title');

      if(lang === 'en'){
        pageTitle.textContent = 'Museum Facility Map';
        pageSub.textContent = 'Complete list of facilities and rooms at the Ambar Polah Museum.';
        section.textContent = 'Museum Facilities & Rooms';
      } else {
        pageTitle.textContent = 'Denah Fasilitas Museum';
        pageSub.textContent = 'Daftar lengkap fasilitas dan ruangan Museum Kayu & Kriya Ambar Polah.';
        section.textContent = 'Fasilitas & Ruangan Museum';
      }

      // update card headings and paragraphs from data attributes
      cards.forEach(card => {
        const titleEl = card.querySelector('h3');
        const pEl = card.querySelector('p');

        if(lang === 'en'){
          titleEl.textContent = card.dataset.titleEn || card.dataset.titleId;
          pEl.textContent = card.dataset.detailEn || card.dataset.detailId;
        } else {
          titleEl.textContent = card.dataset.titleId;
          pEl.textContent = card.dataset.detailId;
        }
      });

      // if modal open, update modal content language too (use currently opened card stored in modal.dataset)
      if(modal.classList.contains('open') && modal.dataset.sourceCard){
        const src = document.querySelector(`[data-img="${modal.dataset.sourceCard}"]`) || document.querySelector('.facility-card[data-img="'+modal.dataset.sourceCard+'"]');
        if(src){
          updateModalFromCard(src);
        }
      }
    }

    // ---------- Modal open/close ----------
    function openModalFromCard(card){
      const img = card.dataset.img || card.querySelector('img')?.src || '';
      modalImg.src = img;
      modalImg.alt = (lang === 'en' ? (card.dataset.titleEn || card.dataset.titleId) : card.dataset.titleId) + ' - image';
      modal.dataset.sourceCard = card.dataset.img || '';

      updateModalFromCard(card);

      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
      // focus trap: move focus into close button
      modalClose.focus();
    }

    function updateModalFromCard(card){
      if(lang === 'en'){
        modalTitle.textContent = card.dataset.titleEn || card.dataset.titleId;
        modalText.textContent = card.dataset.detailEn || card.dataset.detailId;
      } else {
        modalTitle.textContent = card.dataset.titleId;
        modalText.textContent = card.dataset.detailId;
      }
    }

    function closeModal(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
      // return focus to the last focused card (best-effort)
      if(lastFocusedCard) lastFocusedCard.focus();
    }

    // track last focused card
    let lastFocusedCard = null;

    // attach click & keyboard handlers for cards
    cards.forEach(card => {
      // set image src attribute from data-img if the <img> uses it already; ensure fallback
      const imgEl = card.querySelector('img');
      if(imgEl && !imgEl.src){
        imgEl.src = card.dataset.img;
      }

      // click opens modal
      card.addEventListener('click', (e) => {
        lastFocusedCard = card;
        openModalFromCard(card);
      });

      // keyboard: Enter or Space opens modal
      card.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          lastFocusedCard = card;
          openModalFromCard(card);
        }
      });
    });

    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
      // close if clicked outside modal-box
      if(e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && modal.classList.contains('open')) closeModal();
    });

    // modalMore example: could open external page or show expanded text; for now just alert (placeholder)
    modalMore.addEventListener('click', () => {
      // example behaviour: scroll modal to show more (or link to detail page)
      alert((lang === 'en' ? 'More info (example action).' : 'Informasi lebih lanjut (aksi contoh).'));
    });

    // initial translation application
    applyTranslations();

    // Accessibility: ensure images have src (if not provided in markup) - done above

  </script>

</body>
</html>
